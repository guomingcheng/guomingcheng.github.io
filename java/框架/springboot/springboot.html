<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | 文档</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/index.css">
    <script src="/js/index.js"></script>
    <meta name="description" content="个人文档">
    
    <link rel="preload" href="/assets/css/0.styles.8cd2006c.css" as="style"><link rel="preload" href="/assets/js/app.ce1393de.js" as="script"><link rel="preload" href="/assets/js/2.ee68cb5d.js" as="script"><link rel="preload" href="/assets/js/23.e7de804c.js" as="script"><link rel="prefetch" href="/assets/js/10.fae9557b.js"><link rel="prefetch" href="/assets/js/11.ec03d5d9.js"><link rel="prefetch" href="/assets/js/12.aa5ec6e6.js"><link rel="prefetch" href="/assets/js/13.fa27dbe3.js"><link rel="prefetch" href="/assets/js/14.27428945.js"><link rel="prefetch" href="/assets/js/15.e19dc613.js"><link rel="prefetch" href="/assets/js/16.ac5d0041.js"><link rel="prefetch" href="/assets/js/17.b015baa0.js"><link rel="prefetch" href="/assets/js/18.d790bc9c.js"><link rel="prefetch" href="/assets/js/19.7f450609.js"><link rel="prefetch" href="/assets/js/20.504a3fd4.js"><link rel="prefetch" href="/assets/js/21.fcc0c1f7.js"><link rel="prefetch" href="/assets/js/22.1e27d5c1.js"><link rel="prefetch" href="/assets/js/24.89d96b41.js"><link rel="prefetch" href="/assets/js/25.47d860f4.js"><link rel="prefetch" href="/assets/js/26.03bbdba6.js"><link rel="prefetch" href="/assets/js/27.adba25d3.js"><link rel="prefetch" href="/assets/js/28.51f6ec86.js"><link rel="prefetch" href="/assets/js/29.3d75e6eb.js"><link rel="prefetch" href="/assets/js/3.af3b0f40.js"><link rel="prefetch" href="/assets/js/30.3ea92647.js"><link rel="prefetch" href="/assets/js/31.50e89190.js"><link rel="prefetch" href="/assets/js/32.2330f5a5.js"><link rel="prefetch" href="/assets/js/33.3db8ae98.js"><link rel="prefetch" href="/assets/js/34.b38625c8.js"><link rel="prefetch" href="/assets/js/35.49492a46.js"><link rel="prefetch" href="/assets/js/36.5a949c11.js"><link rel="prefetch" href="/assets/js/37.e1595cca.js"><link rel="prefetch" href="/assets/js/38.5e66f157.js"><link rel="prefetch" href="/assets/js/39.e118d131.js"><link rel="prefetch" href="/assets/js/4.dcedff1a.js"><link rel="prefetch" href="/assets/js/40.9b43fbc7.js"><link rel="prefetch" href="/assets/js/41.d9116c83.js"><link rel="prefetch" href="/assets/js/42.95c96c90.js"><link rel="prefetch" href="/assets/js/43.a92421aa.js"><link rel="prefetch" href="/assets/js/44.e19be0d2.js"><link rel="prefetch" href="/assets/js/45.def7c4a5.js"><link rel="prefetch" href="/assets/js/46.b4d92a6e.js"><link rel="prefetch" href="/assets/js/47.de8d2dc3.js"><link rel="prefetch" href="/assets/js/48.21f95edd.js"><link rel="prefetch" href="/assets/js/49.26d21bfa.js"><link rel="prefetch" href="/assets/js/5.1bf7576d.js"><link rel="prefetch" href="/assets/js/50.1ea86b8f.js"><link rel="prefetch" href="/assets/js/51.034e7576.js"><link rel="prefetch" href="/assets/js/52.9afafe11.js"><link rel="prefetch" href="/assets/js/53.688c4d83.js"><link rel="prefetch" href="/assets/js/54.13bfb729.js"><link rel="prefetch" href="/assets/js/55.e066dc58.js"><link rel="prefetch" href="/assets/js/56.c036e408.js"><link rel="prefetch" href="/assets/js/57.007d50cf.js"><link rel="prefetch" href="/assets/js/58.3f670fa2.js"><link rel="prefetch" href="/assets/js/59.f41e8ae6.js"><link rel="prefetch" href="/assets/js/6.8cf2a95e.js"><link rel="prefetch" href="/assets/js/60.f0fda430.js"><link rel="prefetch" href="/assets/js/61.ae4987fd.js"><link rel="prefetch" href="/assets/js/62.3c3e0b82.js"><link rel="prefetch" href="/assets/js/63.87900c10.js"><link rel="prefetch" href="/assets/js/64.9ffbb746.js"><link rel="prefetch" href="/assets/js/65.52ffe053.js"><link rel="prefetch" href="/assets/js/66.0b20125c.js"><link rel="prefetch" href="/assets/js/67.cd8a1668.js"><link rel="prefetch" href="/assets/js/68.97020436.js"><link rel="prefetch" href="/assets/js/69.533a79a4.js"><link rel="prefetch" href="/assets/js/7.299203e9.js"><link rel="prefetch" href="/assets/js/70.29933dd9.js"><link rel="prefetch" href="/assets/js/71.f88421fc.js"><link rel="prefetch" href="/assets/js/72.95de2bad.js"><link rel="prefetch" href="/assets/js/73.4a4257cc.js"><link rel="prefetch" href="/assets/js/74.659aab88.js"><link rel="prefetch" href="/assets/js/75.cadd4a65.js"><link rel="prefetch" href="/assets/js/76.254b9f42.js"><link rel="prefetch" href="/assets/js/77.e5b5a87b.js"><link rel="prefetch" href="/assets/js/78.b1b2dd8d.js"><link rel="prefetch" href="/assets/js/79.cbbbe000.js"><link rel="prefetch" href="/assets/js/8.c093787a.js"><link rel="prefetch" href="/assets/js/80.2b85c169.js"><link rel="prefetch" href="/assets/js/81.c6f26762.js"><link rel="prefetch" href="/assets/js/9.010ac11f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8cd2006c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/区块链.html" class="nav-link">
  区块链
</a></div><div class="nav-item"><a href="/英语.html" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="/前端.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/疑问解述篇.html" class="nav-link">
  疑问解述篇
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/区块链.html" class="nav-link">
  区块链
</a></div><div class="nav-item"><a href="/英语.html" class="nav-link">
  英语
</a></div><div class="nav-item"><a href="/前端.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/疑问解述篇.html" class="nav-link">
  疑问解述篇
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>框架</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/框架/spring/spring.html" class="sidebar-link">spring</a></li><li><a href="/java/框架/mybatis_plus/mybatis-plus.html" class="sidebar-link">mybatisPlus</a></li><li><a href="/java/框架/mybatis/mybatis.html" class="sidebar-link">mybatis</a></li><li><a href="/java/框架/spring_mvc/spring_mvc.html" class="sidebar-link">springMvc</a></li><li><a href="/java/框架/springboot/springboot.html" class="active sidebar-link">springBoot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#核心配置文件" class="sidebar-link">核心配置文件</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#随机数与占位符" class="sidebar-link">随机数与占位符</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#多环境配置" class="sidebar-link">多环境配置</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#logback-日志的配置" class="sidebar-link">logback 日志的配置</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#静态资源映射" class="sidebar-link">静态资源映射</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#mvc-默认与扩展" class="sidebar-link">mvc 默认与扩展</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#注册-tomcat-三大组件" class="sidebar-link">注册 Tomcat 三大组件</a></li><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#druid-配置" class="sidebar-link">Druid 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/框架/springboot/springboot.html#_2、在-yml-的配置文件中配置一下属性" class="sidebar-link">2、在 yml 的配置文件中配置一下属性</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <h4 id="springboot-是要解决-javaee-一站式的解决方案而孕育而生"><a href="#springboot-是要解决-javaee-一站式的解决方案而孕育而生" class="header-anchor">#</a> <div class="biaoti2"></div> springBoot 是要解决 javaEE 一站式的解决方案而孕育而生</h4> <blockquote><p><span id="gonglian"> 在开发 javaEE 项目时，使用当前优秀 ssm 开源框架作为基础。但是，无论项目大小当创建时都不可避免编写繁多的 xml 配置文件，而 springBoot 出现就是解决这方面的问题，能让我们快速的创建 javaEE 项目。</span></p> <blockquote><p>springBoot 是在 spring-4.0 的基础之上进行开发的，主要是简化 javaEE 的复杂的配置文件。创建 springBoot 应用后，只要导入相关的启动器，springBoot 就会帮我们整合相应的功能了</p></blockquote></blockquote> <h2 id="核心配置文件"><a href="#核心配置文件" class="header-anchor">#</a> 核心配置文件</h2> <blockquote><p>在 springBoot 中的核心文件有俩种格式，一种是 application.properties 文件已 .properties 后缀结尾的。
另一种是 application.yml 文件，这是新文件格式，面向数据的。也有新的写法</p> <blockquote><p>application.yml</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">server</span><span class="token punctuation">:</span>            <span class="token attr-value"># value 值前面一定要有一个空格, 这种数据格式是以树形的方法书写的</span>
<span class="token attr-name">   port</span><span class="token punctuation">:</span> <span class="token attr-value">8080</span>
</code></pre></div></blockquote></blockquote> <h4 id="在核心配置文件中配置系统属性变量与值"><a href="#在核心配置文件中配置系统属性变量与值" class="header-anchor">#</a> <div class="biaoti2"></div> 在核心配置文件中配置系统属性变量与值</h4> <blockquote><p><span id="gonglian"> 1、添加属性映射配置提示启动器的 jar 包</span></p> <blockquote><p>添加该 jar 包后，在配置文件中写属性与值时会有提示信息的。</p> <div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></blockquote></blockquote> <blockquote><p><span id="gonglian"> 2、类的属性与配置文件的属性进行绑定</span></p> <blockquote><p>能达到双方绑定需要使用 @ConfigurationProperties 注解，该注解声明了当前组件类与配置文件有了关联。prefix 的值
是属性的前缀。如属性配置: <span id="gonglian">person.name=guomingcheng</span>, 当前类交给 spring 管理后会自动把配置文件的值映射到 name 属性中</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloContorller</span> <span class="token punctuation">{</span>

   <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Boolean</span> isBoos<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote></blockquote> <blockquote><p><span id="gonglian"> 3、application.yml 配置文件属性值书写格式:</span></p> <blockquote><p>在这个配置文件书写的属性与值得格式也是与第 2 步关联的</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">person</span><span class="token punctuation">:</span>
<span class="token attr-name">   name</span><span class="token punctuation">:</span> <span class="token attr-value">guomingcheng</span>
<span class="token attr-name">   isBoos</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">   maps</span><span class="token punctuation">:</span> <span class="token attr-value">{key1: key1, key2: key2 }   # Map 类的格式与 JavaBean 类的格式一样</span>
<span class="token attr-name">   list</span><span class="token punctuation">:</span>        <span class="token attr-value"># 这是集合的书写格式</span>
<span class="token attr-name">     -</span> <span class="token attr-value">ren</span>
<span class="token attr-name">     -</span> <span class="token attr-value">siwan</span>

</code></pre></div></blockquote></blockquote> <h2 id="随机数与占位符"><a href="#随机数与占位符" class="header-anchor">#</a> 随机数与占位符</h2> <blockquote><p><span id="gonglian"> 随机数是 spring boot 提供的一些语法在配置文件中使用，一共有三种如下格式: </span></p> <blockquote><p>在主配置文件中的随机数语法</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
   <span class="token key atrule">number</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.int(10)<span class="token punctuation">}</span> <span class="token comment"># 代表整数随机数 1 到 10 之间获取一个值，如没参数，那么就会随意生成一个随机值</span>
   <span class="token key atrule">uuid</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.uuid<span class="token punctuation">}</span>         <span class="token comment"># 是获取一个随机字符串。</span>
   <span class="token key atrule">uuid_number</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.value<span class="token punctuation">}</span>       <span class="token comment">#可以随机获取数字与字符组合的随机数</span>
</code></pre></div></blockquote></blockquote> <blockquote><p><span id="gonglian"> 占位符也是 spring boot 提供的一种语法在配置文件中使用，一共有俩种如下格式: </span></p> <blockquote><div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
   <span class="token key atrule">uuid</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.uuid<span class="token punctuation">}</span>         <span class="token comment"># 是获取一个随机字符串。</span>
   <span class="token key atrule">uuidName</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>person.uuid<span class="token punctuation">}</span>         <span class="token comment"># 将 person.uuid 的值赋值给 person.uuidName </span>
   <span class="token key atrule">uuuidIsName</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token key atrule">person.uuid</span><span class="token punctuation">:</span> guomingcheng<span class="token punctuation">}</span> <span class="token comment"># 如如果 person.uuid 为 null ,才使用  guomingcheng 值</span>
</code></pre></div></blockquote></blockquote> <h2 id="多环境配置"><a href="#多环境配置" class="header-anchor">#</a> 多环境配置</h2> <blockquote><p><span id="gonglian">  在项目的开发周期中，一般都需要多种环境配置(这个环境配置就是数据库等等的配置信息)如：生产环境、测试环境、上线环境。这些都涉及到配置都不相同，所有根据不同的环境切换不同的配置。这个在 spring boot 中也提供了解决方案。</span></p> <blockquote><p><span id="gonglian" style="font-weight:bold;">  主配置文件: application.yml</span> <br> 因为在 spring boot 启动后，会自动加载 application.yml 或者 application.properties 文件，需要根据下面的配置指定来激活那个环境</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
   <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre></div><p><br><br> <span id="gonglian" style="font-weight:bold;"> 子环境配置文件的书写格式如下:</span> <br>
文件名的格式都是这样写: application-dev.yml , 横杆 - 后跟着字符串就是当前环境的名称。主配置文件就是根据这个名称来激活指定的环境。</p></blockquote></blockquote> <blockquote><p>当项目打成 jar 时也是可以通过命令来切换环境的：<br>
java -jar springboot-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev</p></blockquote> <h2 id="logback-日志的配置"><a href="#logback-日志的配置" class="header-anchor">#</a> logback 日志的配置</h2> <h4 id="在-springboot-中日志的基础配置"><a href="#在-springboot-中日志的基础配置" class="header-anchor">#</a> <div class="biaoti2"></div> 在 springBoot 中日志的基础配置</h4> <blockquote><p><span id="gonglian">  在 springBoot 中也是统一了所有框架使用了 logback 日志。内部也是排除其他框架的依赖的日志，使用适配器模式的做一个适配层。在 springBoot 中也是只需要关心日志的配置即可，logback 依赖的 jar 也被 springBoot 添加了</span></p> <blockquote><p>log 在 springBoot 配置说明:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
 <span class="token key atrule">level</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token key atrule">com.guomingcheng.springboot</span><span class="token punctuation">:</span> info <span class="token punctuation">}</span>  <span class="token comment"># springBoot 默认的日志级别是 info. 使用包控制日志的级别, 这是 map 集合可以多个值</span>
   <span class="token comment">#root: debug   # 设置整个项目的日志, 不建议使用, 建议使用包日志控制的</span>
 <span class="token comment">#file: D:/springBoot/springBoot.log  # 指定一个文件的路径, 日志就会输出到这个文件里的</span>
 <span class="token key atrule">path</span><span class="token punctuation">:</span> D<span class="token punctuation">:</span>/spring/log  <span class="token comment"># 指定一个目录的路径, springBoot 默认在这个目录下生成一个 spring.log 文件. 日志会输出到这个文件中, 优先级小于 file</span>
 <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
   <span class="token key atrule">console</span><span class="token punctuation">:</span>                <span class="token comment"># 指定控制台日志输出的格式</span>
   <span class="token key atrule">file</span><span class="token punctuation">:</span>                   <span class="token comment"># 指定日志输出到文件中的格式</span>
</code></pre></div></blockquote></blockquote> <blockquote><p><span id="gonglian"> 在 springBoot 中，我们也可以使用 logback.xml 配置文件来配置日志的信息。只需要把 logback.xml 添加到 resources 资源目录下即可。日志框架就会扫描到配置文件，就是不会加载 springBoot 配置文件里面的配置了</span></p> <blockquote><p><img src="/img/java/%E6%A1%86%E6%9E%B6/springBoot/springBoot-01.png" alt="An image"></p></blockquote></blockquote> <h4 id="在-springboot-中-logback-日志配置的高级特性"><a href="#在-springboot-中-logback-日志配置的高级特性" class="header-anchor">#</a> <div class="biaoti2"></div> 在 springBoot 中 logback 日志配置的高级特性</h4> <blockquote><p><span id="gonglian"> 在 springBoot 建议 logback 的配置文件名为 logback-spring.xml，这不会被 logback 框架识别。因为该名称的日志配置文件可以使用 springBoot 提供的高级功能，也是由 springBoot 来解析配置的内容。</span></p> <blockquote><p>注意: 文件名必须是 logback-spring.xml <br>
使用 springBoot 提供的功能, 这个功能就是根据项目的环境来切换对应的日志输出格式。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stdout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.classic.filter.ThresholdFilter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>DEBUG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!-- trace、debug、info、warn、error  --&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>

   <span class="token comment">&lt;!-- 核心配置, 这至少配置俩种环境以上, 如果没有环境都不匹配, 那么就会报错--&gt;</span> 
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layout</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.classic.PatternLayout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d [%thread] ---------------------- %-5level %logger{36} [%file : %line] - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d [%thread] ---HHHHHHHHHHH--- %-5level %logger{36} [%file : %line] - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layout</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></blockquote></blockquote> <h2 id="静态资源映射"><a href="#静态资源映射" class="header-anchor">#</a> 静态资源映射</h2> <h4 id="静态资源以-jar-包的方式引入"><a href="#静态资源以-jar-包的方式引入" class="header-anchor">#</a> <div class="biaoti2"></div> 静态资源以 jar 包的方式引入</h4> <blockquote><p><span id="gonglian">  在使用 springBoot 做 web 开发中，前端的第三方 .js 文件可以以 jar 的方式引入项目中。springBoot 为这些第三方的静态资源开放出一个接口，那个页面要引用这些静态资源，就根据开放接口格式引入即可</span> <br><br>
在这个网站上有前端 .js 的 maven 依赖标签: <span id="gonglian"> https://www.webjars.org/ </span></p> <blockquote><p>在 springBoot 定义中凡是以 /webjsrs/** 的 url 控制层处理不了的都在 META-INF/resources/webjars/ 这个路径下找静态资源
<br><br>
列如请求 URL 是 : <span id="gonglian">http://127.0.0.1:8080/webjars/jquery/3.0.0/jquery.js </span> <br>
那么就会找到图片中的静态资源，这个资源就是以 jar 包引入的
<img src="/img/java/%E6%A1%86%E6%9E%B6/springBoot/springBoot-02.png" alt="An image"></p></blockquote></blockquote> <h4 id="静态资源关系映射"><a href="#静态资源关系映射" class="header-anchor">#</a> <div class="biaoti2"></div> 静态资源关系映射</h4> <blockquote><p><span id="gonglian"> springBoot 为静态资源页面中定义了几个目录，只要把 html 文件存放在这些目录中，当控制层处理不了请求时。会在这些目录下根据 url 匹配资源并返回</span></p> <blockquote><p>在 springBoot 定义中凡是以 <span id="gonglian"> /** </span> 的 url 控制层处理不了的都会在下面这些目录匹配资源:
<img src="/img/java/%E6%A1%86%E6%9E%B6/springBoot/springBoot-03.png" alt="An image"></p></blockquote></blockquote> <blockquote><p><span id="gonglian"> 自定义静态资源目录：</span></p> <blockquote><p>注意: 当在配置文件中自定义静态资源目录后，springBoot 默认的静态资源目录就会失效。但是也是可以配置多个目录的</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">spring.resources.static-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:/static</span>
<span class="token attr-name">spring.mvc.date-format</span><span class="token punctuation">=</span>
</code></pre></div></blockquote></blockquote> <h2 id="mvc-默认与扩展"><a href="#mvc-默认与扩展" class="header-anchor">#</a> mvc 默认与扩展</h2> <h4 id="在-springboot-默认配置上扩展或者全面托管"><a href="#在-springboot-默认配置上扩展或者全面托管" class="header-anchor">#</a> <div class="biaoti2"></div> 在 springBoot 默认配置上扩展或者全面托管</h4> <blockquote><p><span id="gonglian">在 springBoot 自动装配 n 组件时，会先到容器中查看用户是否自己配置 @Configuration 类，类型为该组件配置类的类型。如果有就使用用户的，否则就使用自动装配。</span> <br><br> <span id="gonglian">但该组件的配置类类型可以有多个的话，那么 springBoot 就的默认的配置与用户的配置会组合起来。用户的配置就是在默认的配置进行扩展，而 WebMvc 就是可以扩展的组件。</span></p> <blockquote><p><span id="gonglian"> 在默认配置上扩展</span><br>
想要扩展时, 编写一个配置类，类型为 WebMvcConfigurer。可根据该接口的方法进行扩展想要的功能</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

  <span class="token comment">/**
   *  配置 Controller 转发到一个静态页面
   */</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">&quot;/hello2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;/hello.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   *  设置静态资源映射配置
   */</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/mingcheng/**&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/mingcheng/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><br><br> <span id="gonglian">全面托管不使用默认配置</span> <br> 只要在配置类上添加 @EnableWebMvc 注解，那么 springBoot 的为 springMvc 默认配置就会全部失效。只采用用户这个配置类的配置</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>


<span class="token punctuation">}</span>
</code></pre></div></blockquote></blockquote> <h2 id="注册-tomcat-三大组件"><a href="#注册-tomcat-三大组件" class="header-anchor">#</a> 注册 Tomcat 三大组件</h2> <blockquote><p><span id="gonglian">在使用 ssm 的时候外部容器技术时，我们是可以通过在 web.xml 文件中注册三大组件的。但是在 springBoot 中是使用嵌入式的 tomcat, 如有需要注册三大组件时。springBoot 也提供了对应的策略。</span></p> <blockquote><p><span id="gonglian"> 注册 servlet(服务) 组件: </span> <br> 和原生开放一样，MyServlet 继承 HttpServlet。通过下面配置注册 servlet 服务。</p> <div class="language-js extra-class"><pre class="language-js"><code>@Configuration
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTomcatConfig</span> <span class="token punctuation">{</span>

   @Bean
   <span class="token keyword">public</span> ServletRegistrationBean <span class="token function">myServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       ServletRegistrationBean registrationBean <span class="token operator">=</span>            <span class="token comment">//当前 servlet 的路径映射 </span>
               <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">,</span> <span class="token string">&quot;/ming&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/cheng&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> registrationBean<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><br><br> <span id="gonglian"> 注册 filter(过滤器) 组件:</span><br>
注册过滤器需要 MyFilter 继承于 Filter</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTomcatConfig</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@Bean</span>
   <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">myFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">FilterRegistrationBean</span> <span class="token class-name">RegistrationBean</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">RegistrationBean</span><span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注册 Filter 注解</span>
       <span class="token class-name">RegistrationBean</span><span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;/ming&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/cheng&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 映射请求</span>
       <span class="token keyword">return</span> <span class="token class-name">RegistrationBean</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><br><br> <span id="gonglian"> 注册 Listener(监听器) 组件:</span><br>
这个是可以注册所有的监听事件，但是现在的 MyListener 类是实现 ServletContextListener 接口。表示监听嵌入式的 tomcat 启动与销毁</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTomcatConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletListenerRegistrationBean</span> <span class="token function">myListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServletListenerRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyListener</span><span class="token punctuation">&gt;</span></span> listenerRegistrationBean <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">ServletListenerRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> listenerRegistrationBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote></blockquote> <h2 id="druid-配置"><a href="#druid-配置" class="header-anchor">#</a> Druid 配置</h2> <h4 id="_1、添加核心依赖的-jar"><a href="#_1、添加核心依赖的-jar" class="header-anchor">#</a> 1、添加核心依赖的 jar</h4> <div class="language-xml extra-class"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_2、在-yml-的配置文件中配置一下属性"><a href="#_2、在-yml-的配置文件中配置一下属性" class="header-anchor">#</a> 2、在 yml 的配置文件中配置一下属性</h3> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
   <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
     <span class="token key atrule">username</span><span class="token punctuation">:</span> root
     <span class="token key atrule">password</span><span class="token punctuation">:</span> gmC24354.
     <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/ruiyue<span class="token punctuation">?</span>characterEncoding=utf<span class="token punctuation">-</span>8<span class="token important">&amp;serverTimezone=GMT%2B8&amp;useSSL=false</span>
     <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
     <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver

     <span class="token comment"># druid 数据的属性配置</span>
     <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">5</span>
     <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">5</span>
     <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>
     <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">60000</span>
     <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>
     <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>
     <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> SELECT 1 FROM DUAL
     <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
     <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
     <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
     <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

     <span class="token comment"># 配置监控统计拦截的 filters, 去掉后监控界面 sql 无法统计, 'wall' 用于防火墙</span>
     <span class="token key atrule">filters</span><span class="token punctuation">:</span>
       <span class="token key atrule">commons-log.connection-logger-name</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall<span class="token punctuation">,</span>log4j
     <span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation">:</span> <span class="token number">20</span>
     <span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
     <span class="token key atrule">connectionProperties</span><span class="token punctuation">:</span> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500


<span class="token comment"># mybatsi 的属性配置</span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
   <span class="token key atrule">config-location</span><span class="token punctuation">:</span> <span class="token key atrule">classpath</span><span class="token punctuation">:</span> <span class="token comment"># mybatis xml 配置文件路径</span>
   <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span>   <span class="token comment"># 定义包的别名</span>
   <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> <span class="token key atrule">classpath</span><span class="token punctuation">:</span> <span class="token comment"># mapper xml 的映射文件</span>

</code></pre></div><h4 id="_3、注册-druid-数据源与监控配置"><a href="#_3、注册-druid-数据源与监控配置" class="header-anchor">#</a> 3、注册 Druid 数据源与监控配置</h4> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidConfig</span> <span class="token punctuation">{</span>

   <span class="token comment">/**
    *  数据绑定也可以作用于方法, 会与 druid 属性绑定
    */</span>
   <span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource&quot;</span><span class="token punctuation">)</span>
   <span class="token annotation punctuation">@Bean</span>
   <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">druidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/**
    *  配置 Druid 的监控, 这是一个 Druid 后台管理 Servlet
    */</span>
   <span class="token annotation punctuation">@Bean</span>
   <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">seatViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">ServletRegistrationBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StatViewServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;/druid/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> initParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;loginUsername&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 用户名</span>
       initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;loginPassword&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gmC24354.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 密码</span>
       initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;allow&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加白名单, 空允许所有用户访问</span>
       initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;deny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;192.168.15.21&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加黑名单</span>

       bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/**
    *  配置一个 web 监控的 filter
    */</span>
   <span class="token annotation punctuation">@Bean</span>
   <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">webStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">FilterRegistrationBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       bean<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WebStatFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> initParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       initParams<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;exclusions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.js,*.css,/druid/*&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不拦截的请求</span>

       bean<span class="token punctuation">.</span><span class="token function">setInitParameters</span><span class="token punctuation">(</span>initParams<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// webStatFilter 参数</span>
       bean<span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/框架/spring_mvc/spring_mvc.html" class="prev">
        springMvc
      </a></span> <span class="next"><a href="/java/中间件/nginx/nginx.html">
        nginx
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ce1393de.js" defer></script><script src="/assets/js/2.ee68cb5d.js" defer></script><script src="/assets/js/23.e7de804c.js" defer></script>
  </body>
</html>
