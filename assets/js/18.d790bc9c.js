(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{392:function(t,e,a){"use strict";a.r(e);var s=a(46),l=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"tps-与-qps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tps-与-qps"}},[t._v("#")]),t._v(" Tps 与 Qps")]),t._v(" "),a("h4",{attrs:{id:"这是数据库每秒处理事务与查询重要的概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#这是数据库每秒处理事务与查询重要的概念"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 这是数据库每秒处理事务与查询重要的概念")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticClass:"lan"},[t._v("Tps:")]),t._v(" Transactions Per Seecond (每秒处理传输的事务地个数)，这是指服务器每秒处理的事务数，支持事务的存储引擎如 lnnoDB 等特有的一个性能指标")])]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticClass:"lan"},[t._v("得出 Tps 的算法:")]),t._v(" (事务的个数 + 回滚的个数) / 执行时间 = Tps ")])])])]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticClass:"lan"},[t._v("Qps:")]),t._v(" Quenes Per Second (每秒处理查询的量数) ，这同时适用于 lnnoDB 和 MylSAM 引擎")])]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticClass:"lan"},[t._v("得出 Qps 的算法:")]),t._v(" 查询的量数  / 执行时间 = Qps ")])])])]),t._v(" "),a("h2",{attrs:{id:"mysqlslap-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqlslap-测试"}},[t._v("#")]),t._v(" mysqlslap 测试")]),t._v(" "),a("h4",{attrs:{id:"mysql-自带的-mysqlslap-压力并发测试工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-自带的-mysqlslap-压力并发测试工具"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" mysql 自带的 mysqlslap 压力并发测试工具")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticClass:"lan"},[t._v("mysqlslap")]),t._v(" 是从 mysql-5.1.4 以上版本官方自带的压力测试，自会创建数据库、表、字段，模拟多个客户端并发，当测试完后会自动删除及断开连接。下面是 "),a("span",{staticClass:"lan"},[t._v("mysqlslap")]),t._v(" 命令提供的参数以及作用: ")])])]),t._v(" "),a("div",{staticStyle:{"font-size":"12px"}},[a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("值类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("--create-schema")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指定测试的数据库名称，默认的是 mysqlslap")])]),t._v(" "),a("tr",[a("td",[t._v("--engine")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("创建测试表使用的存储引擎，可指定多个与 ，逗号分隔")])]),t._v(" "),a("tr",[a("td",[t._v("--concurrency")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("模拟 N 个客户端并发执行，可指定多个值与 ，逗号分隔")])]),t._v(" "),a("tr",[a("td",[t._v("--number-of-queries")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("总测试查询的次数(并发客户端数 * 客户端查询的次数 = 总测试数)")])]),t._v(" "),a("tr",[a("td",[t._v("--iterations")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("迭代执行的次数，就是相同的次数进行 N 次，求一个平均值。指的是整个步骤的重复次数，包括准备数据、测试、清理")])]),t._v(" "),a("tr",[a("td",[t._v("--commit")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("执行 N 条 DML 后提交一次")])]),t._v(" "),a("tr",[a("td",[t._v("--auto-generate-sql, -a")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("自动生成测试表和数据，表示用 msqlslap 工具自己生成 sql 脚本来测试并发压力")])]),t._v(" "),a("tr",[a("td",[t._v("--auto-generate-sql-load-tryp")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("表示测试环境是读操作还是写操作还是俩者混合的，取值有: read(读)、write(写)、mixed 默认值(读写)")])]),t._v(" "),a("tr",[a("td",[t._v("--auto-generate-sql-add-auto-increment")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("对生成的表自动添加自增的列")])]),t._v(" "),a("tr",[a("td",[t._v("--number-char-cols")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("自动生成的测试表中包含 N 个字符类型的列，默认是 1")])]),t._v(" "),a("tr",[a("td",[t._v("--number-int-cols")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("int")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("自动生成的测试表中包含 N 个数字类型的列，默认是 1")])]),t._v(" "),a("tr",[a("td",[t._v("--debug-info")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("打印内存和 CPU 的信息")])])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/java/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql-01.png",alt:"An image"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql-01.png",alt:"An image"}}),t._v(" "),a("br"),t._v(" "),a("br")])])}),[],!1,null,null,null);e.default=l.exports}}]);