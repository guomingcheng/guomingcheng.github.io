(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{390:function(t,s,a){"use strict";a.r(s);var n=a(46),i=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"下载与安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载与安装"}},[t._v("#")]),t._v(" 下载与安装")]),t._v(" "),a("h4",{attrs:{id:"_1、进入-usr-local-src-目录下执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、进入-usr-local-src-目录下执行"}},[t._v("#")]),t._v(" 1、进入 /usr/local/src/ 目录下执行: "),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("下载命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" wget http://nginx.org/download/nginx-1.9.0.tar.gz")])]),t._v(" "),a("blockquote",[a("p",[t._v("如出现下图显示 “未找到命令” , 就执行:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" yum -y install wget ")]),t._v("再接上一步即可\n"),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-01.png",alt:"An image"}})])])]),t._v(" "),a("h4",{attrs:{id:"_2、接下再-usr-local-src-目录下有一个-nginx-1-9-0-tar-gz-文件-执行以下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、接下再-usr-local-src-目录下有一个-nginx-1-9-0-tar-gz-文件-执行以下"}},[t._v("#")]),t._v(" 2、接下再 /usr/local/src/ 目录下有一个 nginx-1.9.0.tar.gz 文件, 执行以下: "),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("解压命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" tar -zxvf nginx-1.9.0.tar.gz ")]),t._v("  到当前文件夹\n"),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-02.png",alt:"An image"}})])]),t._v(" "),a("h4",{attrs:{id:"_3、cd-到解压后的-nginx-1-9-0-目录-安装-nginx-需要的依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、cd-到解压后的-nginx-1-9-0-目录-安装-nginx-需要的依赖"}},[t._v("#")]),t._v(" 3、cd 到解压后的 nginx-1.9.0 目录，安装 nginx 需要的依赖: "),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("执行:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" yum install -y openssl openssl-devel")]),t._v(" "),a("br"),t._v("\n执行:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" yum -y install zlib zlib-devel ")]),a("br"),t._v("\n执行:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" yum -y install zlib zlib-devel ")])])]),t._v(" "),a("h4",{attrs:{id:"_4、nginx-目录下-设置-nginx-安装参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、nginx-目录下-设置-nginx-安装参数"}},[t._v("#")]),t._v(" 4、nginx 目录下，设置 nginx 安装参数")]),t._v(" "),a("blockquote",[a("p",[t._v("./configure 是源码目录，--prefix 的值是要安装的目录，后面是 nginx 的模块 "),a("br"),t._v("\n执行命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v("./configure --prefix=/usr/local/nginx --with-http_ssl_module")])]),t._v(" "),a("blockquote",[a("p",[t._v("如出现下图红色错误部分，就执行  "),a("span",{attrs:{id:"gonglian"}},[t._v(" yum -y install gcc gcc-c++ autoconf automake make ")]),t._v("\n， 再重复执行上一次命令。\n"),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-03.png",alt:"An image"}})])])]),t._v(" "),a("blockquote",[a("p",[a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-04.png",alt:"An image"}})])]),t._v(" "),a("h4",{attrs:{id:"_5、nginx-目录下-编译-安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、nginx-目录下-编译-安装-nginx"}},[t._v("#")]),t._v(" 5、nginx 目录下，编译 && 安装 nginx")]),t._v(" "),a("blockquote",[a("p",[t._v("执行命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" make && make install ")])])]),t._v(" "),a("h4",{attrs:{id:"_6、启动-nginx。进入-nginx-安装的目录-usr-local-nginx-sbin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、启动-nginx。进入-nginx-安装的目录-usr-local-nginx-sbin"}},[t._v("#")]),t._v(" 6、启动 nginx。进入 nginx 安装的目录 /usr/local/nginx/sbin")]),t._v(" "),a("blockquote",[a("p",[t._v("执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx")]),t._v(" "),a("br"),t._v("\n注意: 如主机访问不到虚拟机的 nginx 服务，需要开放虚拟机的端口，参考该教程: "),a("a",{attrs:{href:"https://jingyan.baidu.com/article/5552ef4796f55e518efbc94f.html",target:"_blank"}},[t._v("Centos-7 开放端口")])])]),t._v(" "),a("h2",{attrs:{id:"基本介绍与基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本介绍与基本命令"}},[t._v("#")]),t._v(" 基本介绍与基本命令")]),t._v(" "),a("h4",{attrs:{id:"基本命令接受"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本命令接受"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 基本命令接受")]),t._v(" "),a("blockquote",[a("h4",{attrs:{id:"进入到-nginx-安装目录下的-sbin-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入到-nginx-安装目录下的-sbin-目录"}},[t._v("#")]),t._v(" 进入到 nginx 安装目录下的 sbin 目录")]),t._v(" "),a("blockquote",[a("p",[t._v("执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx -s stop ")]),t._v("  停止"),a("br"),t._v("\n执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx -s quit ")]),t._v("      退出"),a("br"),t._v("\n执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx -s reload  ")]),t._v("  重新加载 nginx.conf 核心配置文件"),a("br"),t._v("\n执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx -t  ")]),t._v("  检查配置文件是否有错误 "),a("br"),t._v("\n执行命令: "),a("span",{attrs:{id:"gonglian"}},[t._v(" ./nginx -c /usr/local/nginx/conf/nginx.conf  ")]),t._v("  指定一个配置文件来启动")])])]),t._v(" "),a("h4",{attrs:{id:"文件目录介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件目录介绍"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 文件目录介绍")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("目录名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("介绍")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("conf")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("存放 nginx 需要的配置文件")])]),t._v(" "),a("tr",[a("td",[t._v("html")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("存放静态资源目录")])]),t._v(" "),a("tr",[a("td",[t._v("logs")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("存放日志目录")])]),t._v(" "),a("tr",[a("td",[t._v("sbin")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("存放 nginx 的启动程序")])])])]),t._v(" "),a("h2",{attrs:{id:"主配置文件与单配置说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主配置文件与单配置说明"}},[t._v("#")]),t._v(" 主配置文件与单配置说明")]),t._v(" "),a("h4",{attrs:{id:"nginx-conf-主配置文件详情描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-conf-主配置文件详情描述"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" nginx.conf 主配置文件详情描述 "),a("br"),a("br")]),t._v(" "),a("div",{staticClass:"nginx-body"},[a("span",{staticStyle:{"font-size":"13px"}},[t._v("#user nobody;")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//这声明该 nginx 是哪个用户的，如 # 掉，代表哪个用户都可以。当指明用户时，尽可能是root 级别的"),a("br")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[t._v("worker_processes "),a("span",{staticClass:"hong"},[t._v("1")]),t._v(";")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// 值 1 表示启动一个 worker 线程，一般是服务器是有几个 CPU 那就配置几个 "),a("br")]),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[t._v("\n#error_log  logs/error.log;  "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//这三行表示日志的输出级别, 可以选择性的配置 "),a("br")]),t._v("\n#error_log  logs/error.log  "),a("span",{staticClass:"hong"},[t._v("notice")]),t._v(";  "),a("br"),t._v("\n#error_log  logs/error.log  "),a("span",{staticClass:"hong"},[t._v("info")]),t._v(";  "),a("br")]),t._v(" "),a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v("#pid "),a("span",{staticClass:"hong"},[t._v("logs/nginx.pid")]),t._v(";")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//pid 表示记录 nginx 启动后的进程 id 好。可以到目录文件找到进程号 "),a("br")])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nevents{"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示 nginx 在 Liunx 上读取静态资源的线程数, 如不设置。liunx 默认的较少, 高访问时 nginx 会阻塞")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("worker_connections "),a("span",{staticClass:"hong"},[t._v("1024")]),t._v(";\n")]),t._v(" "),a("p",[t._v("}")])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//引入 nginx 相关联的程序文件，而 mime.types 该文件在 nginx 安装/conf/mime.types")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("include "),a("span",{staticClass:"hong"},[t._v("mime.types")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// nginx 处理文件默认使用的字符集, 也可以更换别的字符集处理")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("default_type "),a("span",{staticClass:"hong"},[t._v("application/octet-stream")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//这是声明日志的变量， 变量名为 mian。以 $ 开头的都是常量皆是 nginx 提高的，可以拼接成一条日志 ")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("#log_format "),a("span",{staticClass:"lan"},[t._v(" main")]),t._v("  '$remote_addr - $remote_user [$time_local] \"$request\" ' "),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("#                 "),a("span",{staticStyle:{display:"inline-block",width:"117px"}}),t._v("'$status $body_bytes_sent \"$http_referer\" '"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("#                "),a("span",{staticStyle:{display:"inline-block",width:"110px"}}),t._v('  \'"$http_user_agent" "$http_x_forwarded_for"\';\n')]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//该表示生成日志，该值是日志将要输出到那个文件下。表示使用 mian 变量的日志格式 ")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("#access_log   \n "),a("span",{staticClass:"hong"},[t._v("logs/access.log")]),a("span",{staticClass:"lan"},[t._v(" main")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//因为文件上传于下载的传输效率很低，而 no 表示 nginx 开启高效传输效率")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("sendfile "),a("span",{staticClass:"hong"},[t._v("no")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示客户端连接 nginx, 在 60 毫秒内连不上表示连接超时")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("keepalive_timeout "),a("span",{staticClass:"hong"},[t._v("60")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//配置一个 server 代表一个虚拟主机")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("localhost")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("#access_log  "),a("span",{staticClass:"hong"},[t._v("logs/access.log")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// 在 server 下配置的与 http 的相同，server 的会覆盖掉 http ")]),a("br")]),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nlocation /{"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" // location 是匹配资源的作用, 当输入 guomingcheng.github.io 就会匹配当前的")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// html 是一个目录, 可以使用绝对路径, 也可以是相对路径, 如当前会找到 nginx/html  ")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//index 命令只有 url 后面跟着 / 斜杆才有效，index 就是在哪个指定目录下找该文件")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("index   "),a("span",{staticClass:"hong"},[t._v("index.html index.htm;")]),t._v(";\n")]),a("br"),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("h2",{attrs:{id:"location-匹配规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-匹配规则"}},[t._v("#")]),t._v(" location 匹配规则")]),t._v(" "),a("h4",{attrs:{id:"location-路由语法匹配规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location-路由语法匹配规则"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" location 路由语法匹配规则 "),a("br"),a("br")]),t._v(" "),a("div",{staticStyle:{"font-size":"12px"}},[a("table",[a("thead",[a("tr",[a("th",[t._v("实列")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("运算符")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("location /{ root html; }")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("普通匹配")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("普通命中，但是会被正则匹配覆盖掉。优先级最低的")])]),t._v(" "),a("tr",[a("td",[t._v("location ^~ /b/{ }")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("相对匹配")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("^~")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("也是和普通匹配一样命中，但是不会被正则匹配覆盖掉，优先级只低于精准匹配")])]),t._v(" "),a("tr",[a("td",[t._v("location = /guo.html{ }")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("精准匹配")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("=")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("精准匹配也就是与 path 完全相等才会命中，优先级最高")])]),t._v(" "),a("tr",[a("td",[t._v("location ~* /b/{ }")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("不区分大小写正则匹配")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("~*")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("正则匹配只高于普通匹配")])]),t._v(" "),a("tr",[a("td",[t._v("location ~ /b/{ }")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("区分大小写正则匹配")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("~")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}})])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-07.png",alt:"An image"}})]),t._v(" "),a("h2",{attrs:{id:"指令介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指令介绍"}},[t._v("#")]),t._v(" 指令介绍")]),t._v(" "),a("h4",{attrs:{id:"nginx-指令使用介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-指令使用介绍"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" nginx 指令使用介绍 "),a("br"),a("br")]),t._v(" "),a("p",[t._v("列子 URL : http://www.guomingcheng.com/ming/cheng.html\n")]),a("div",{staticStyle:{"font-size":"12px"}},[a("p"),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("指令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("作用")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("使用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("root")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指定静态资源目录")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("root 是声明一个 path 路径, 在 nginx 默认时 path 路径是 /usr/local/nginx/html , nginx 是安装目录。root 就是要改过默认的静态资源的路径，另一个作用是：会留下命中的路径，如 location /ming{} 命中会留下路径是 ming/index.html")])]),t._v(" "),a("tr",[a("td",[t._v("alias")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("指定静态资源目录")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("也是以 root 相同的都是声明一个 path 路径, 而不同的是会把命中的剔除掉，例如：location /ming{} 命中后留下的路径是 index.html")])]),t._v(" "),a("tr",[a("td",[t._v("set")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("定义一个变量")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("在 server 花括号内声明: set $a 33, 这样就是定义了一个变量")])]),t._v(" "),a("tr",[a("td",[t._v("echo")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("输出文本")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("这是与 javaEE 中的 resp 响应浏览器一样，但是需要安装模块，这并不是 nginx 默认就有的。安装步骤详见: "),a("a",{attrs:{href:"nginx-中级.html#miaodian1"}},[t._v("echo 模块安装")])])])])])]),t._v(" "),a("h2",{attrs:{id:"rewrite-关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rewrite-关键字"}},[t._v("#")]),t._v(" rewrite 关键字")]),t._v(" "),a("h4",{attrs:{id:"nginx-的请求转发与重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-的请求转发与重定向"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" nginx 的请求转发与重定向 "),a("br"),a("br")]),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//配置一个 server 代表一个虚拟主机")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("localhost")]),t._v(";\n")]),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nlocation /ming/cheng/index.html{"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //redirect 重定向, ^/ 是正则表达式，表示无论什么字符串都命中。红色值表示将要替换掉命中的字符串。 ")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //效果就如：浏览器重新请求 http://location:80/ming/index.html URL")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("rewrite ^/ "),a("span",{staticClass:"hong"},[t._v("/ming/index.html")]),t._v(" "),a("span",{staticClass:"lan"},[t._v("redirect")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//  ")]),a("br")]),t._v(" "),a("p",[t._v("}")])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nlocation = /ming/index.html{"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //break 请求转发，红色值会替换掉正则表达式命中的。")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //效果就如：在到 root 声明的 path 下查找 /ming/cheng/index.html 指定的文件")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("rewrite ^/ "),a("span",{staticClass:"hong"},[t._v("/ming/cheng/index.html")]),t._v(" "),a("span",{staticClass:"lan"},[t._v("break")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//红色是路径, 蓝色是请求转发的关键字 ")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//")]),a("br")]),t._v(" "),a("p",[t._v("}")])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nlocation = /ming/index.html{"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //last 请求转发，红色值会替换掉正则表达式命中的。")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" //效果就如：根据替换掉的 path 再一次刷新 location ，重新命中")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("rewrite ^/ "),a("span",{staticClass:"hong"},[t._v("/ming/cheng/index.html")]),t._v(" "),a("span",{staticClass:"lan"},[t._v("last")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//红色是路径, 蓝色是请求转发的关键字 ")]),a("br")]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("h2",{attrs:{id:"日志切割配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志切割配置"}},[t._v("#")]),t._v(" 日志切割配置")]),t._v(" "),a("h4",{attrs:{id:"_1、可以在-nginx-conf-文件中定义自己日志格式-如下图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、可以在-nginx-conf-文件中定义自己日志格式-如下图片"}},[t._v("#")]),t._v(" 1、可以在 nginx.conf 文件中定义自己日志格式, 如下图片:")]),t._v(" "),a("blockquote",[a("p",[a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-05.png",alt:"An image"}})]),t._v(" "),a("blockquote",[a("p",[t._v("可以使用命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v("tail -f access.log ")]),t._v("  来实时看日志的打印。access.log 日志的路径\n"),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-06.png",alt:"An image"}})])])]),t._v(" "),a("h4",{attrs:{id:"_2、在-nginx-sbin-目录下创建一个可执行文件-编写下面的-xshell-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、在-nginx-sbin-目录下创建一个可执行文件-编写下面的-xshell-脚本"}},[t._v("#")]),t._v(" 2、在 nginx/sbin 目录下创建一个可执行文件，编写下面的 Xshell 脚本")]),t._v(" "),a("blockquote",[a("h4",{attrs:{id:"文件为-cutting-sh-保存退出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件为-cutting-sh-保存退出"}},[t._v("#")]),t._v(" 文件为: cutting.sh , 保存退出")]),t._v(" "),a("div",{staticClass:"nginx-body",staticStyle:{"font-size":"13px","line-height":"23px"}},[t._v(" \n#!/bin/bash"),a("br"),t._v('\nLOG_HOME="/usr/local/nginx/logs"  '),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//该值选择自己安装 nginx 路径下的 logs 目录")]),a("br"),t._v("\nLOG_PATH_BAK=`date +%Y-%m-%d` "),a("br"),t._v("\nmv ${LOG_HOME}/access.log ${LOG_HOME}/access.${LOG_PATH_BAK}.log "),a("br"),t._v("\nmv ${LOG_HOME}/error.log ${LOG_HOME}/error.${LOG_PATH_BAK}.log "),a("br"),t._v("\nkill -USR1 `cat ${LOG_HOME}/nginx.pid` \n")])]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[t._v("当保存退出时该 cutting.sh 还没有可执行权限，需要在当前目录下执行命令为: "),a("br"),t._v(" "),a("span",{attrs:{id:"gonglian"}},[t._v("chmod +x cutting.sh")]),a("br")])])]),t._v(" "),a("h4",{attrs:{id:"_3、在-nginx-sbin-目录下制定配置命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、在-nginx-sbin-目录下制定配置命令"}},[t._v("#")]),t._v(" 3、在 nginx/sbin 目录下制定配置命令")]),t._v(" "),a("blockquote",[a("p",[t._v("使用命令: crontab -e ,将会打开文件编辑。填写如下文本\n")]),a("div",{staticClass:"nginx-body",staticStyle:{"font-size":"13px","line-height":"23px"}},[a("span",{attrs:{id:"gonglian"}},[t._v("//五个 * 号从左到右分别是 秒分时天月 。就会执行 cutting.sh ")]),a("br"),t._v("\n00 23 * * * /usr/local/nginx/sbin/cutting.sh  "),a("a",{attrs:{href:"https://www.cnblogs.com/p0st/p/9482167.html",target:"_blank"}},[t._v("定时时间参考该教程")])]),a("p")]),t._v(" "),a("h2",{attrs:{id:"第三方模块安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三方模块安装"}},[t._v("#")]),t._v(" 第三方模块安装")]),t._v(" "),a("h4",{attrs:{id:"_1、进入-usr-local-src-目录下执行-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、进入-usr-local-src-目录下执行-2"}},[t._v("#")]),t._v(" 1、进入 /usr/local/src/ 目录下执行: "),a("br")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"15px"}},[t._v(" 1.1、echo 模块下载命令 ")]),t._v(": "),a("br"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("  wget https://github.com/openresty/echo-nginx-module/archive/v0.60.tar.gz")])]),t._v(" "),a("blockquote",[a("p",[t._v("如出现以下字样，就代表模块下载好了\n"),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-08.png",alt:"An image"}})])])]),t._v(" "),a("h4",{attrs:{id:"_2、接下再-usr-local-src-目录会有你跟下载模块的-tar-包-执行解压命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、接下再-usr-local-src-目录会有你跟下载模块的-tar-包-执行解压命令"}},[t._v("#")]),t._v(" 2、接下再 /usr/local/src/ 目录会有你跟下载模块的 tar 包，执行解压命令: "),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("解压命令:  "),a("span",{attrs:{id:"gonglian"}},[t._v(" tar -zxvf *.tar.gz ")]),t._v("  到当前文件夹")])]),t._v(" "),a("h4",{attrs:{id:"_3、进入-nginx-解压后的目录下-编译添加模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、进入-nginx-解压后的目录下-编译添加模块"}},[t._v("#")]),t._v(" 3、进入 nginx 解压后的目录下，编译添加模块")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"15px"}},[t._v(" 1.1、echo 模块编译添加 ")]),t._v(": "),a("br"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("./configure --add-module=/usr/local/src/echo-nginx-module-0.60 --with-http_ssl_module")]),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-04.png",alt:"An image"}})])]),t._v(" "),a("h4",{attrs:{id:"_4、nginx-解压后的目录下-安装-模块命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、nginx-解压后的目录下-安装-模块命令"}},[t._v("#")]),t._v(" 4、nginx 解压后的目录下，安装 * 模块命令:")]),t._v(" "),a("blockquote",[a("p",[t._v("执行命令:  "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" make && make install ")])])]),t._v(" "),a("h4",{attrs:{id:"_5、生效问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、生效问题"}},[t._v("#")]),t._v(" 5、生效问题")]),t._v(" "),a("blockquote",[a("p",[t._v("注意: 如果模块安装没有问题, 但没有生效，那么就先杀死 nginx 服务，再重新开启。")])]),t._v(" "),a("h2",{attrs:{id:"反向代理与负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反向代理与负载均衡"}},[t._v("#")]),t._v(" 反向代理与负载均衡")]),t._v(" "),a("ul",{staticClass:"nginx-ul"},[a("li",[a("div",[t._v("192.168.150.127")]),t._v(" "),a("div",[t._v("nginx")]),t._v(" "),a("div",[t._v("代理: 静态资源服务器")])]),t._v(" "),a("li",[a("div",[t._v("192.168.150.128")]),t._v(" "),a("div",[t._v("tomcat")]),t._v(" "),a("div",[t._v("负载: 动态资源服务器")])]),t._v(" "),a("li",[a("div",[t._v("192.168.150.129")]),t._v(" "),a("div",[t._v("tomcat")]),t._v(" "),a("div",[t._v("负载: 动态资源服务器")])]),t._v(" "),a("li",[a("div",[t._v("192.168.150.126")]),t._v(" "),a("div",[t._v("nginx")]),t._v(" "),a("div",[t._v("中间站服务器配置")])])]),t._v(" "),a("br"),t._v(" "),a("h4",{attrs:{id:"在-nginx-conf-文件如何配置以及说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-nginx-conf-文件如何配置以及说明"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 在 nginx.conf 文件如何配置以及说明")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nupstream "),a("span",{staticClass:"lan"},[t._v(" nginx")]),t._v("{"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// 配置负载服务器, "),a("span",{staticClass:"lan"},[t._v(" nginx")]),t._v(" 相当是变量, 花括号内可以随意添加 n 机器")]),a("br"),t._v(" "),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//使用该指令，可以解决 session 问题，但是 weight 会失效。因为他以客户端的 IP 做为键，以一台服务器"),a("img",{staticClass:"nginx-img"}),t._v("作为值，该客户端每次访问都是相当的服务器，session 也将一致，但是宕机了就没办法了")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("#ip_hash; \n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//如何不设置 weight 权重，nginx 默认是 1:1 模式轮询, 就现在这样设置, 就表示 128 IP 2 次 余 129"),a("img",{staticClass:"nginx-img"}),t._v(" IP 一次这样轮询")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("server"),a("span",{staticClass:"hong"},[t._v(" 192.168.150.128")]),t._v(" weight="),a("span",{staticClass:"lan"},[t._v("2")]),t._v(";"),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server   "),a("span",{staticClass:"hong"},[t._v("192.168.150.129")]),t._v(" weight="),a("span",{staticClass:"lan"},[t._v("1")]),t._v(";\n")]),a("br"),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("localhost")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nlocation /nginx{"),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("// nginx 对应的是上面配置的变量。但需要注意的一点: nginx 后面跟着斜杆就相当 alias , 否则就是 root ")]),a("br"),t._v(" "),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//浏览器输入: http://127.0.0.1/"),a("span",{staticClass:"hong"},[t._v("nginx/tomcat/A131.html")])]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//末尾没斜杆: http://192.168.150.128/"),a("span",{staticClass:"hong"},[t._v("nginx/tomcat/A131.html")])]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//末尾有斜杆: http://192.168.150.128/"),a("span",{staticClass:"hong"},[t._v("tomcat/A131.html")])]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("proxy_pass  "),a("span",{staticClass:"hong"},[t._v("http://"),a("span",{staticClass:"lan"},[t._v("nginx")]),t._v("/")]),t._v(";\n")]),t._v(" "),a("br"),t._v("}\n")])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location /130{"),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//反向代理与负载均衡都是使用 proxy_pass 关键字, 只要端口的后面跟着 / 斜杆, 就是 alias 模式。无论后面有 psth 是否有斜杆无关")])]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//浏览器输入: http://127.0.0.1/130/"),a("span",{staticClass:"hong"},[t._v("nginx/A130.html")])]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//端口有斜杆: http://192.168.150.130/nginx/"),a("span",{staticClass:"hong"},[t._v("nginx/A130.html")])]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("proxy_pass  "),a("span",{staticClass:"hong"},[t._v("http://192.168.150.127/nginx")]),t._v(";\n")]),t._v(" "),a("br"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("p",[t._v("}")])])]),t._v(" "),a("h2",{attrs:{id:"nginx-解决跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-解决跨域"}},[t._v("#")]),t._v(" nginx 解决跨域")]),t._v(" "),a("h4",{attrs:{id:"什么是跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是跨域"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v("  什么是跨域")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v("在浏览器有一个同源策略。该策略描述的是，当浏览器请求 www.mingcheng.com 域名时返回一个 HTML 页面")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[t._v("，在该页面使用 ajax 请求别的如 www.guomingcheng.com 下的 json 数据时，这样不同域名就会产生跨域，不止域名不同产生跨域，当一个 url的协议、域名、端口三者之间任意一个与当前页面 url 不同即为跨域，如下图：")]),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-09.png",alt:"An image"}})])]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v("当浏览器发现请求的域名不同时, request 会携带一个字段 Origin 值为来源网址 www.mingcheng.com , 如下:")]),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-10.png",alt:"An image"}}),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 如果想要 www.mingcheng.com 请求成功，web 服务需要在 response 时，设置 Access-Control-Allow-Origin 字段的值为 www.mingcheng.com , 当浏览器检查该字段的值是  www.mingcheng.com , 就代表目标 web 服务信任该域名。这样就可以解决跨域了。")]),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-11.png",alt:"An image"}})])])]),t._v(" "),a("h4",{attrs:{id:"解决跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决跨域"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v("  解决跨域")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("if($http_origin = http://www.mingcheng.com){"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("set "),a("span",{staticClass:"lan"},[t._v("$allow_url")]),t._v(" $http_origin;"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("}  \n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//是否允许请求带有验证信息")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("add_header Access-Control-Allow-Credentials "),a("span",{staticClass:"hong"},[t._v("true")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//允许跨域访问的域名，可以是多个一列，也可以使用 * , * 代表着那个域名都可以")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("add_header Access-Control-Allow-Origin "),a("span",{staticClass:"lan"},[t._v("$allow_url")]),t._v(";\n")]),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location /tomcat{"),a("br")]),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v("\n}\n")])]),t._v(" "),a("h2",{attrs:{id:"防盗链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防盗链"}},[t._v("#")]),t._v(" 防盗链")]),t._v(" "),a("h4",{attrs:{id:"让静态资源只在自己域名下的-html-离显示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让静态资源只在自己域名下的-html-离显示"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v("  让静态资源只在自己域名下的 html 离显示")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("valiad_referers: 是匹配域名的白名单，如果不匹配，那么 nginx 就把内置变量 $valid_referer 设置为 1，就会进入 if 快返回 404。校验的值就是浏览器传入来的 Referer 字段的值，该值表示当前请求来自哪的域名下的，如下图:")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-14.png",alt:"An image"}}),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" valiad_referers 的值: 是一个正则表达式, 可根据你写的正则来配置多个白名单  ")])])]),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location /tomcat{"),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("valid_referers  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("if($invalid_referer){"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("return "),a("span",{staticClass:"hong"},[t._v("404")]),t._v(" ;"),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("}  \n")]),a("br"),t._v(" "),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html/static")]),t._v(";\n")]),a("br"),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v("\n}\n")])]),t._v(" "),a("h2",{attrs:{id:"客户端缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端缓存"}},[t._v("#")]),t._v(" 客户端缓存")]),t._v(" "),a("h4",{attrs:{id:"让服务器减少带宽"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让服务器减少带宽"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 让服务器减少带宽")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" expires 是缓存关键字, 他告诉浏览器该 location 下的静态资源你可以在本地缓存多少时间 ")]),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" 时间单位: [2s = 2秒钟] [2m = 2分钟钟] [2h = 3小时] [2d = 天]  ")])])]),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location ^~ /tomcat{"),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("expires  "),a("span",{staticClass:"hong"},[t._v("2s")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html/static")]),t._v(";\n")]),a("br"),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v("\n}\n")])]),t._v(" "),a("h2",{attrs:{id:"文件压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件压缩"}},[t._v("#")]),t._v(" 文件压缩")]),t._v(" "),a("h4",{attrs:{id:"压缩传输的数据-让服务器减少带宽资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩传输的数据-让服务器减少带宽资源"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 压缩传输的数据，让服务器减少带宽资源")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" 浏览器与 nginx 交互时，当一个 url 请求 nginx 是，浏览器会携带自身支持解压缩类型的值一并传：如下图: ")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-12.png",alt:"An image"}}),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" nginx 可选用浏览器能解压的类型进行对文件压缩，也并携带返回，让浏览器根据那个类型来解压: ")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-13.png",alt:"An image"}})])]),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示该虚拟机监听 80 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location ~ /(.*).(html|js|css|jpg|jpeg|png|gif)${ "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//url 的后缀只要是书写的都能匹配")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("gzip "),a("span",{staticClass:"hong"},[t._v("on")]),t._v("; "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("# on 是启用 gzip , 默认是 off 不启用")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("# 表示 js、css、html、jpg、png、gif 的格式文件启用 gzip 压缩功能")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("gzip_types  "),a("span",{staticClass:"hong"},[t._v("application/javascript text/css image/jpeg image/png image/gif")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("gzip_min_length  "),a("span",{staticClass:"hong"},[t._v("10")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("#10 是压缩文件的最小值，小于该值得文件不会压缩")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("gzip_buffers  "),a("span",{staticClass:"hong"},[t._v("4 1k")]),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" #设置压缩响应的缓冲区的个数与大小，默认是内存一页的大小")]),t._v(";\n")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("gzip_comp_level  "),a("span",{staticClass:"hong"},[t._v("1")]),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("#压缩级别，取值范围是 1--9 ，值越大压缩的比率就越大，但会耗费 cpu 的时间")]),t._v(";\n")]),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html/static")]),t._v(";\n")]),a("br"),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v("\n}\n")])]),t._v(" "),a("h2",{attrs:{id:"https-协议传输"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-协议传输"}},[t._v("#")]),t._v(" https 协议传输")]),t._v(" "),a("h4",{attrs:{id:"让数据传输之间更加安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让数据传输之间更加安全"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 让数据传输之间更加安全")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" https 协议需要的证书文件与私钥文件，是在阿里云申请时会有这俩个文件，只需要存放在对应的路径就行，阿里云申请的也是验证过的。但是: 没有公司是不能申请验证的，所有就需要生成一个假的验证，先看看 https 协议的效果。")]),a("br"),t._v(" "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" cd 到 /usr/local/nginx/https/ 目录下，生成证书。 ")]),a("br")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 1、创建私钥文件--命令为: "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" openssl genrsa -des3 -out "),a("span",{staticClass:"lan"},[t._v("server.key ")]),t._v(" 1024 ")])]),a("br")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 1.1会提示你输入私钥密码，如图下: ")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-15.png",alt:"An image"}})])])])]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 2、创建签名证书文件--命令为: "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" openssl req -new -key "),a("span",{staticClass:"lan"},[t._v("server.key ")]),t._v("  -out  "),a("span",{staticClass:"lan"},[t._v("server.csr  ")])])]),a("br")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 2.1这还不是目标证书，这里需要用到 "),a("span",{staticClass:"lan"},[t._v("server.key ")]),t._v(" 私钥文件，但这个私钥有密码的它会提示你输入密码:")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-16.png",alt:"An image"}}),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 2.2接着会让你输入各种信息，按着说明输入即可: ")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-17.png",alt:"An image"}})])])])]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 3、创建一个没有密码的私钥文件--命令为:  "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" openssl rsa -in "),a("span",{staticClass:"lan"},[t._v("server.key ")]),t._v(" -out  "),a("span",{staticClass:"lan"},[t._v("server_nopass.key")])])]),a("br")]),t._v(" "),a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 3.1这个就是把有密码的私钥文件复制一份，但剔除密码，但还是提示你输入密码:  ")]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-18.png",alt:"An image"}})])])])]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[a("span",{staticStyle:{"font-size":"13px"}},[t._v(" 4、创建目标证书文件--命令为: "),a("br"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v(" openssl x509 -req -days 365 -in "),a("span",{staticClass:"lan"},[t._v("server.csr ")]),t._v("  -signkey  "),a("span",{staticClass:"lan"},[t._v("server_nopass.key ")]),t._v("  -out "),a("span",{staticClass:"lan"},[t._v(" server.crt ")])])]),a("br"),t._v(" "),a("img",{attrs:{src:"/img/java/%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/nginx-18.png",alt:"An image"}})])])]),t._v(" "),a("h4",{attrs:{id:"配置-server-的-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-server-的-https"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 配置 server 的 https")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"nginx-body"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nhttp{"),a("br"),a("br"),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("80")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}}),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}}),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("rewrite ^/  "),a("span",{staticClass:"hong"},[t._v("https://www.mingcheng.com:443")]),t._v(" "),a("span",{staticClass:"lan"},[t._v("redirect")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("# 让用户服务 http 时重定向到 https 中")]),a("br")]),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location ~ /(.*).(html|js|css|jpg|jpeg|png|gif)${ "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//url 的后缀只要是书写的都能匹配")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html/static")]),t._v(";\n")]),a("br"),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px"}},[t._v("\nserver{\n"),a("br"),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("listen  "),a("span",{staticClass:"hong"},[t._v("443 ssl")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//https 协议默认监听的是 443 端口")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("server_name  "),a("span",{staticClass:"hong"},[t._v("www.guomingcheng.com")]),t._v(";\n"),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//表示监听那个域名")]),a("br")]),a("br"),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("# 证书文件，")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("ssl_certificate     "),a("span",{staticClass:"hong"},[t._v("/usr/local/nginx/https/server.crt")]),t._v(";"),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("# 服务器私钥文件")]),a("br"),t._v(" "),a("img",{staticClass:"nginx-img"}),t._v("ssl_certificate_key  "),a("span",{staticClass:"hong"},[t._v("/usr/local/nginx/https/server_nopass.key")]),t._v(";"),a("br")]),t._v(" "),a("div",{staticClass:"nginx-div"},[a("div",{staticStyle:{"font-size":"13px"}},[a("p",[t._v("location ~ /(.*).(html|js|css|jpg|jpeg|png|gif)${ "),a("span",{staticStyle:{"font-size":"13px"},attrs:{id:"gonglian"}},[t._v("//url 的后缀只要是书写的都能匹配")]),a("br")]),t._v(" "),a("span",[a("img",{staticClass:"nginx-img"}),t._v("root  "),a("span",{staticClass:"hong"},[t._v("html/static")]),t._v(";\n")]),a("br"),t._v(" "),a("span"),t._v("}\n")])]),t._v(" "),a("p",[t._v("}")])])]),t._v("\n}\n")])]),t._v(" "),a("h4",{attrs:{id:"以上所有步骤都配置好了-但需要注意俩点-如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以上所有步骤都配置好了-但需要注意俩点-如下"}},[t._v("#")]),t._v(" "),a("div",{staticClass:"biaoti2"}),t._v(" 以上所有步骤都配置好了，但需要注意俩点，如下")]),t._v(" "),a("blockquote",[a("blockquote",[a("p",[t._v("1、确认是开发 443 端口，端口开发参考教程:  "),a("a",{attrs:{href:"https://jingyan.baidu.com/article/5552ef4796f55e518efbc94f.html",target:"_blank"}},[t._v("Centos-7 开放端口")]),a("br"),t._v("\n2、在 https 协议传输的文件，不能使用 ajxa 请求 http 协议的数据")])])])])}),[],!1,null,null,null);s.default=i.exports}}]);